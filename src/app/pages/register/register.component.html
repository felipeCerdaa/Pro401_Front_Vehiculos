<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Registro
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card class="ion-padding">
    <ion-card-header>
      <ion-card-title>Nuevo Usuario</ion-card-title>
    </ion-card-header>

      <form [formGroup] ="registerForm" (submit)="submitForm()">

        <ion-input 
          label="Rut"
          type="text"
          label-placement="floating" 
          fill="outline" 
          formControlName="Run"
          errorText="El Rut es requerido y debe ser valido"
          placeholder="Ingrese su Rut">
        </ion-input>

        <br>

        <ion-input 
          label="Nombres"
          type="text"
          label-placement="floating" 
          fill="outline" 
          formControlName="Nombres"
          errorText="Ingresa tu nombre"
          placeholder="Ingresa tu nombre">
        </ion-input>

        <br>

        <ion-input 
          label="Apellidos"
          type="text"
          label-placement="floating" 
          fill="outline" 
          formControlName="Apellidos"
          errorText="Ingresa tus Apellidos"
          placeholder="Ingresa tus Apellidos">
        </ion-input>

        <br>
        
        <ion-input 
          label="Fecha Nacimiento"
          type="date"
          label-placement="floating" 
          fill="outline" 
          formControlName="FechaNacimiento"
          errorText="Ingresa tu Fecha de Nacimiento"
          placeholder="Ingresa tu Fecha de Nacimiento">
        </ion-input>

        <br>

        <ion-list>
          <ion-item>
            <ion-select 
            aria-label="formatoTrabajo" 
            placeholder="Formato Trabajo"
            fill="outline"
            formControlName="TipoTrabajoId">
              <ion-select-option value="1">Presencial</ion-select-option>
              <ion-select-option value="2">Mixto</ion-select-option>
              <ion-select-option value="3">Teletrabajo</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>

        <br>

        <ion-list>
          <ion-item>
            <ion-select
             aria-label="comunaResidencia" 
             placeholder="Ingresa tu Comuna de Residencia" 
             fill="outline"
             formControlName="ComunaResidenciaId">
             <ion-select-option *ngFor="let item of comunas" value="{{item.id}}">{{item.nombre}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>

        <ion-list>
          <ion-item>
            <ion-select 
            aria-label="Comuna de Trabajo" 
            placeholder="Ingresa tu Comuna de Trabajo" 
            fill="outline"
            formControlName="ComunaTrabajoId">
              <ion-select-option *ngFor="let item of comunas" value="{{item.id}}">{{item.nombre}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
        
        <br>

        <ion-input 
          label="Email"
          type="email"
          label-placement="floating" 
          fill="outline" 
          formControlName="Email"
          errorText="Email es requerido y debe ser valido"
          placeholder="Ingrese su Email">
        </ion-input>

        <br>

        <ion-input 
          label="Contraseña" 
          type="password"
          label-placement="floating" 
          fill="outline" 
          formControlName="Password"
          errorText="Contraseña es requerida, debe tener al menos 8 caracteres y debe contener al menos una letra mayúscula, una letra minúscula y un número"
          placeholder="Ingrese su Contraseña">
        </ion-input>

        <br>

        <ion-input 
          label="Repetir Contraseña" 
          type="password"
          label-placement="floating" 
          fill="outline" 
          formControlName="confirmPassword"
          errorText="Contraseña es requerida, debe tener al menos 8 caracteres y debe contener al menos una letra mayúscula, una letra minúscula y un número"
          placeholder="Repita su Contraseña">
        </ion-input>

        <div *ngIf="registerForm.errors?.['passwordMismatch']">
          <ion-text color="danger">Las contraseñas no coinciden</ion-text>
        </div>

        <br>
        <ion-button
        type="submit"
        [disabled]="!registerForm.valid" 
        expand="block">Registrar</ion-button>
        <br>
        <ion-button
        (click)="backToLogin()" 
        expand="block">VOLVER</ion-button>

        <P>En caso de dudas contactar al 22-777 77 77</P>

      </form>

  </ion-card>
  
</ion-content>
